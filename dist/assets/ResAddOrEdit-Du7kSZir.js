import{i as D}from"./_isme_icons-VdKe73uL.js";import{u as Q}from"./useForm-b0yQVc1X.js";import{x as z,p as y,aL as R,aM as H,av as J,aN as Y,aj as W,c as U,aO as X,aP as Z,a5 as f,aQ as ee,J as ne,U as te,d as p,o as d,e as a,g as t,Y as ae,j as s,ao as se,au as oe,y as m,aR as le,a8 as re,at as ue,ap as ie,h as v,aw as pe}from"./index-DYcU_f0W.js";import i from"./QuestionLabel-BpZlfaih.js";const de=Object.assign(Object.assign({},X),Z),me=z({__GRID_ITEM__:!0,name:"FormItemGridItem",alias:["FormItemGi"],props:de,setup(){const l=U(null);return{formItemInstRef:l,validate:(...c)=>{const{value:_}=l;if(_)return _.validate(...c)},restoreValidation:()=>{const{value:c}=l;c&&c.restoreValidation()}}},render(){return y(J,R(this.$.vnode.props||{},H),{default:()=>{const l=R(this.$props,Y);return y(W,Object.assign({ref:"formItemInstRef"},l),this.$slots)}})}}),$={getMenuTree:()=>f.get("/api/admin/permissions/menu-tree"),getButtons:({parentId:l})=>f.get(`/api/admin/permissions/buttons/${l}`),getComponents:()=>ee.get("/components.json"),addPermission:l=>f.post("/api/admin/permissions",l),savePermission:(l,b)=>f.put(`/api/admin/permissions/${l}`,b),deletePermission:l=>f.delete(`/api/admin/permissions/${l}`)},ce=["src/views/profile/index.vue","src/views/product/index.vue","src/views/product/add.vue","src/views/product/edit/[id].vue","src/views/pms/user/index.vue","src/views/pms/role/role-user.vue","src/views/pms/role/index.vue","src/views/pms/resource/index.vue","src/views/pms/resource/components/ResAddOrEdit.vue","src/views/pms/resource/components/QuestionLabel.vue","src/views/pms/resource/components/MenuTree.vue","src/views/order/index.vue","src/views/order/add.vue","src/views/order/edit/[id].vue","src/views/login/index.vue","src/views/iframe/index.vue","src/views/home/index.vue","src/views/error-page/404.vue","src/views/error-page/403.vue","src/views/demo/upload/index.vue","src/views/coupon/index.vue","src/views/coupon/add.vue","src/views/coupon/edit/[id].vue","src/views/category/index.vue","src/views/category/add.vue","src/views/category/edit/[id].vue","src/views/base/unocss.vue","src/views/base/unocss-icon.vue","src/views/base/test-modal.vue","src/views/base/keep-alive.vue","src/views/base/index.vue"],ve={__name:"ResAddOrEdit",props:{menus:{type:Array,required:!0}},emits:["refresh"],setup(l,{expose:b,emit:M}){const c=l,_=M,E=ne(()=>[{name:"Menu gốc",id:"",children:c.menus||[]}]),A=ce.map(r=>({label:r,value:r})),j=D.map(r=>({label:()=>y("span",{class:"flex items-center"},[y("i",{class:`${r} text-18 mr-8`}),r]),value:r})),F=[{label:"Theo hệ thống",value:""},{label:"Tối giản-simple",value:"simple"},{label:"Thông thường-normal",value:"normal"},{label:"Đầy đủ-full",value:"full"},{label:"Trống-empty",value:"empty"}],T={required:!0,message:"Đây là trường bắt buộc",trigger:["blur","change"]},V={enable:!0,show:!0,layout:""},[q,e,C]=Q(),[N,w]=te(),h=U(""),O=U(!1);function K(r={}){const{action:n,row:g={},...u}=r;h.value=n,e.value={...V,...g},O.value=!!g.parentId&&g.type==="BUTTON",N.value.open({...u,onOk:S})}async function S(){await C(),w.value=!0;try{let r;e.value.parentId||(e.value.parentId=null),h.value==="add"?r=(await $.addPermission(e.value)).data:h.value==="edit"&&await $.savePermission(e.value.id,e.value),w.value=!1,$message.success("Lưu thành công"),_("refresh",h.value==="add"?r:e.value)}catch(r){return console.error(r),w.value=!1,!1}}return b({handleOpen:K}),(r,n)=>{const g=le,u=me,k=re,x=ue,I=ie,B=pe,G=oe,L=se;return d(),p(t(ae),{ref_key:"modalRef",ref:N},{default:a(()=>[s(L,{ref_key:"modalFormRef",ref:q,"label-placement":"left","require-mark-placement":"left","label-width":100,model:t(e)},{default:a(()=>[s(G,{cols:24,"x-gap":24},{default:a(()=>[s(u,{span:12,label:"Menu thuộc về",path:"parentId"},{default:a(()=>[s(g,{value:t(e).parentId,"onUpdate:value":n[0]||(n[0]=o=>t(e).parentId=o),options:t(E),disabled:t(O),"label-field":"name","key-field":"id",placeholder:"Menu gốc",clearable:""},null,8,["value","options","disabled"])]),_:1}),s(u,{span:12,path:"name",rule:T},{label:a(()=>[s(i,{label:"Tên",content:"Tiêu đề"})]),default:a(()=>[s(k,{value:t(e).name,"onUpdate:value":n[1]||(n[1]=o=>t(e).name=o)},null,8,["value"])]),_:1}),s(u,{span:12,path:"code",rule:T},{label:a(()=>[s(i,{label:"Mã",content:"Nếu là menu thì tương ứng với name của route frontend, sử dụng PascalCase"})]),default:a(()=>[s(k,{value:t(e).code,"onUpdate:value":n[2]||(n[2]=o=>t(e).code=o)},null,8,["value"])]),_:1}),t(e).type==="MENU"?(d(),p(u,{key:0,span:12,path:"path",rule:{trigger:["blur","change"],type:"string",message:"Phải bắt đầu bằng /、http、https",validator(o,P){return P?/\/|http|https/.test(P):!0}}},{label:a(()=>[s(i,{label:"Địa chỉ route",content:"Menu cha có thể không cần điền"})]),default:a(()=>[s(k,{value:t(e).path,"onUpdate:value":n[3]||(n[3]=o=>t(e).path=o)},null,8,["value"])]),_:1},8,["rule"])):m("",!0),t(e).type==="MENU"?(d(),p(u,{key:1,span:12,path:"icon"},{label:a(()=>[s(i,{label:"Icon menu",content:"Như material-symbols:help，thư viện icon: https://icones.js.org/collection/all"})]),default:a(()=>[s(x,{value:t(e).icon,"onUpdate:value":n[4]||(n[4]=o=>t(e).icon=o),options:t(j),clearable:"",filterable:""},null,8,["value","options"])]),_:1})):m("",!0),t(e).type==="MENU"?(d(),p(u,{key:2,span:12,path:"layout"},{label:a(()=>[s(i,{label:"layout",content:"Tương ứng với tên thư mục trong layouts, để trống thì mặc định là default"})]),default:a(()=>[s(x,{value:t(e).layout,"onUpdate:value":n[5]||(n[5]=o=>t(e).layout=o),options:F,clearable:""},null,8,["value"])]),_:1})):m("",!0),t(e).type==="MENU"?(d(),p(u,{key:3,span:24,path:"component"},{label:a(()=>[s(i,{label:"Đường dẫn component",content:"Đường dẫn component frontend, bắt đầu bằng /src, menu cha có thể không cần điền"})]),default:a(()=>[s(x,{value:t(e).component,"onUpdate:value":n[6]||(n[6]=o=>t(e).component=o),options:t(A),clearable:"",filterable:"",tag:""},null,8,["value","options"])]),_:1})):m("",!0),t(e).type==="MENU"?(d(),p(u,{key:4,span:12,path:"show"},{label:a(()=>[s(i,{label:"Trạng thái hiển thị",content:"Kiểm soát có hiển thị trong thanh menu hay không, không ảnh hưởng đến đăng ký route"})]),default:a(()=>[s(I,{value:t(e).show,"onUpdate:value":n[7]||(n[7]=o=>t(e).show=o)},{checked:a(()=>n[11]||(n[11]=[v(" Hiển thị ")])),unchecked:a(()=>n[12]||(n[12]=[v(" Ẩn ")])),_:1},8,["value"])]),_:1})):m("",!0),s(u,{span:12,path:"enable"},{label:a(()=>[s(i,{label:"Trạng thái",content:"Nếu là menu, vô hiệu hóa sẽ không được thêm vào bảng route, không thể vào trang này"})]),default:a(()=>[s(I,{value:t(e).enable,"onUpdate:value":n[8]||(n[8]=o=>t(e).enable=o)},{checked:a(()=>n[13]||(n[13]=[v(" Kích hoạt ")])),unchecked:a(()=>n[14]||(n[14]=[v(" Vô hiệu hóa ")])),_:1},8,["value"])]),_:1}),t(e).type==="MENU"?(d(),p(u,{key:5,span:12,path:"keepAlive"},{label:a(()=>[s(i,{label:"KeepAlive",content:"Thiết lập keepAlive cần đặt tên component là mã của menu hiện tại"})]),default:a(()=>[s(I,{value:t(e).keepAlive,"onUpdate:value":n[9]||(n[9]=o=>t(e).keepAlive=o)},{checked:a(()=>n[15]||(n[15]=[v(" Có ")])),unchecked:a(()=>n[16]||(n[16]=[v(" Không ")])),_:1},8,["value"])]),_:1})):m("",!0),t(e).type==="MENU"?(d(),p(u,{key:6,span:12,label:"Sắp xếp",path:"order",rule:{type:"number",required:!0,message:"Đây là trường bắt buộc",trigger:["blur","change"]}},{default:a(()=>[s(B,{value:t(e).order,"onUpdate:value":n[10]||(n[10]=o=>t(e).order=o)},null,8,["value"])]),_:1})):m("",!0)]),_:1})]),_:1},8,["model"])]),_:1},512)}}},he=Object.freeze(Object.defineProperty({__proto__:null,default:ve},Symbol.toStringTag,{value:"Module"}));export{he as R,ve as _,$ as a};
