import{q as $,f as b,o as m,l as y,n as M,g as e,R as N,S as Q,c as x,U,d as w,e as d,j as f,V as q,G as O,W as E,F as z,i as F,X as K,h as R,t as S,E as X,Y as I,Z as j,$ as G,a0 as J,a1 as W,u as A,a as Y,b as B,J as T,w as Z,O as H,a2 as ee,a3 as ne,K as te,p as V,y as oe,a4 as se,k as ae}from"./index-DYcU_f0W.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";const be={__name:"MenuCollapse",setup(k){const o=$();return(t,i)=>(m(),b("div",{id:"menu-collapse",class:"f-c-c cursor-pointer rounded-4 auto-bg-hover p-6 text-22 transition-all-300",onClick:i[0]||(i[0]=(...p)=>e(o).switchCollapsed&&e(o).switchCollapsed(...p))},[y("i",{class:M(e(o).collapsed?"i-line-md-menu-unfold-left":"i-line-md-menu-fold-left")},null,2)]))}},re={class:"flex"},ce={__name:"RoleSelect",setup(k,{expose:o}){var a,v;const t=N(),i=Q(),p=x(t.roles||[]),l=x(((a=t.currentRole)==null?void 0:a.code)??((v=p.value[0])==null?void 0:v.code)??""),[r,u]=U();function g(h){var s;(s=r.value)==null||s.open({...h})}async function c(){var h;try{u.value=!0;const{data:s}=await j.switchCurrentRole(l.value);await i.switchCurrentRole(s),u.value=!1,$message.success("Chuyển đổi thành công"),(h=r.value)==null||h.handleOk()}catch(s){return console.error(s),u.value=!1,!1}}async function n(){var h;i.logout(),(h=r.value)==null||h.close(),$message.success("Đã đăng xuất")}return o({open:g}),(h,s)=>{const D=K,L=E,P=q,C=X;return m(),w(e(I),{ref_key:"modalRef",ref:r,title:"Vui lòng chọn vai trò",width:"360px",class:"p-12"},{footer:d(()=>{var _;return[y("div",re,[f(C,{class:"flex-1",size:"large",onClick:s[1]||(s[1]=ye=>n())},{default:d(()=>s[2]||(s[2]=[R(" Thoát đăng nhập ")])),_:1,__:[2]}),f(C,{loading:e(u),class:"ml-20 flex-1",type:"primary",size:"large",disabled:((_=e(t).currentRole)==null?void 0:_.code)===e(l),onClick:c},{default:d(()=>s[3]||(s[3]=[R(" Xác nhận ")])),_:1,__:[3]},8,["loading","disabled"])])]}),default:d(()=>[f(P,{value:e(l),"onUpdate:value":s[0]||(s[0]=_=>O(l)?l.value=_:null),class:"cus-scroll-y max-h-420 w-full py-16"},{default:d(()=>[f(L,{vertical:"",size:24,class:"mx-12"},{default:d(()=>[(m(!0),b(z,null,F(e(p),_=>(m(),w(D,{key:_.id,class:M(["h-36 w-full text-center text-16 leading-36",{"bg-primary! color-white!":_.code===e(l)}]),value:_.code},{default:d(()=>[R(S(_.name),1)]),_:2},1032,["class","value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1},512)}}},ie="/assets/isme-D6AR05SU.png",ue={},pe={class:"h-32 w-32 rounded-4 bg-primary"};function _e(k,o){return m(),b("div",pe,o[0]||(o[0]=[y("img",{src:ie,alt:"Logo"},null,-1)]))}const de=le(ue,[["render",_e]]),xe={__name:"SideLogo",setup(k){const o="Vue Naive Admin",t=$();return(i,p)=>{const l=de,r=G("router-link");return m(),w(r,{class:"h-60 f-c-c",to:"/"},{default:d(()=>[f(l),J(y("h2",{class:"ml-10 max-w-140 flex-shrink-0 text-16 color-primary font-bold"},S(e(o)),513),[[W,!e(t).collapsed]])]),_:1})}}},we={__name:"SideMenu",setup(k){const o=A(),t=Y(),i=$();B();const p=x(null),l=T(()=>{var c;return((c=t.meta)==null?void 0:c.parentKey)||t.name}),r=T(()=>[{label:"Dashboard",key:"dashboard",path:"/"},{label:"Quản lý sản phẩm",key:"product-management",children:[{label:"Danh mục sản phẩm",key:"category",path:"/category"},{label:"Sản phẩm",key:"product",path:"/product"}]},{label:"Quản lý đơn hàng",key:"order-management",children:[{label:"Đơn hàng",key:"order",path:"/order"},{label:"Mã giảm giá",key:"coupon",path:"/coupon"}]},{label:"Quản lý bài viết",key:"post-management",children:[{label:"Danh mục bài viết",key:"category_news",path:"/category_news"},{label:"Bài viết",key:"new",path:"/new"},{label:"Tag",key:"tag",path:"/tag"},{label:"FAQ",key:"faq",path:"/faq"}]},{label:"Quản lý người dùng",key:"user-management",children:[{label:"Quản lý khách hàng",key:"user",path:"/pms/user"},{label:"Quản lý nhân sự",key:"staff",path:"/pms/staff"}]},{label:"Quản lý hệ thống",key:"system-management",children:[{label:"Vai trò",key:"role",path:"/pms/role"},{label:"Phân quyền vai trò",key:"role-permission",path:"/pms/role-permission"},{label:"Nhật ký hoạt động",key:"operation-log",path:"/pms/operation-log"}]}]);function u(c,n){for(const a of c){if(a.key===n)return a;if(a.children){const v=u(a.children,n);if(v)return v}}return null}function g(c,n){if(n||(n=u(r.value,c)),!(!n||!n.path))try{ne(n.originPath||n.path)?$dialog.confirm({type:"info",title:"Vui lòng chọn cách mở",positiveText:"Mở liên kết ngoài",negativeText:"Mở nhúng trong trang này",onPositiveClick(){window.open(n.originPath||n.path)},onNegativeClick(){o.push(n.path)}}):o.push(n.path)}catch(a){console.error("Lỗi khi xử lý menu:",a)}}return Z(()=>t.fullPath,()=>{H(()=>{})},{immediate:!0}),(c,n)=>{const a=ee;return m(),w(a,{ref_key:"menuRef",ref:p,class:"side-menu",accordion:"",indent:18,"collapsed-icon-size":22,"collapsed-width":64,collapsed:e(i).collapsed,options:e(r),value:e(l),"onUpdate:value":g},null,8,["collapsed","options","value"])}}},me={id:"user-dropdown",class:"flex cursor-pointer items-center"},he={key:0,class:"ml-12 flex-col flex-shrink-0 items-center"},fe={class:"text-14"},ge={class:"text-12 opacity-50"},Se={__name:"UserAvatar",setup(k){const o=A(),t=N(),i=Q();B();const p=te([{label:"Thông tin cá nhân",key:"profile",icon:()=>V("i",{class:"i-material-symbols:person-outline text-14"})},{label:"Đăng xuất",key:"logout",icon:()=>V("i",{class:"i-mdi:exit-to-app text-14"})}]),l=x(null);function r(u){var g;switch(u){case"profile":o.push("/profile");break;case"toggleRole":(g=l.value)==null||g.open({onOk(){location.reload()}});break;case"logout":$dialog.confirm({title:"Thông báo",type:"info",content:"Xác nhận đăng xuất?",async confirm(){i.logout(),$message.success("Đã đăng xuất")}});break}}return(u,g)=>{const c=se,n=ae;return m(),b(z,null,[f(n,{options:e(p),onSelect:r},{default:d(()=>{var a;return[y("div",me,[f(c,{round:"",size:36,src:e(t).avatar},null,8,["src"]),e(t).userInfo?(m(),b("div",he,[y("span",fe,S(e(t).nickName??e(t).username),1),y("span",ge,"["+S((a=e(t).currentRole)==null?void 0:a.name)+"]",1)])):oe("",!0)])]}),_:1},8,["options"]),f(e(ce),{ref_key:"roleSelectRef",ref:l},null,512)],64)}}};export{be as _,Se as a,xe as b,we as c};
